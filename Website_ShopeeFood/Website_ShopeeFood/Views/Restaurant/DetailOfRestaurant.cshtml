@model List<Website_ShopeeFood.Models.FoodModel>
@{
    ViewData["Title"] = "DetailOfRestaurant";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="/css/Details.css">
<link rel="stylesheet" href="/css/StyleList.css">
<link rel="stylesheet" href="/css/StyleForHomePage.css">
<link rel="stylesheet" href="/css/BodyForHomePage.css">
<link rel="stylesheet" href="/css/ContentForHomePage.css">
<link rel="stylesheet" href="/css/Login.css">
<link rel="stylesheet" href="/css/Footer.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css" />
@*<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">*@
<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
@*<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
*@

<div class="now-details-restaurant">
    <div id="Detail_Restaurant" class="container">
        @*-----------------------------------*@

    </div>
</div>

<div class="container relative clearfix">
    <div class="now-menu-restaurant">
        <div class="tab">
            <div class="item">
                Thực Đơn
            </div>
        </div>

        <div class="content">
            <div class="menu-content">
                <div class="category">
                    <div class="list-category">
                        <div class="scrollbar-container">
                            @*-----------------------------------*@

                            <div class="item-content">
                                Rau Má Xay Đá
                            </div>
                            <div class="item-content">
                                Rau Má Sữa Xay Đá
                            </div>
                            <div class="item-content">
                                Rau Má Đậu Xanh
                            </div>
                            <div class="item-content">
                                Siêu Combo
                            </div>


                        </div>
                    </div>
                </div>
                <div class="menu-details">
                    <div class="promotions">
                        <div class="promotion-item">
                            <div>
                                <img class="icon-promotion" src="https://images.foody.vn/icon/discount/s/shopeefood_voucher_14.png" alt="Thanh toán thẻ tín dụng Sacombank: Giảm 30K cho đơn từ 100K vào thứ hai mỗi tuần">
                                <div class="content-promotion">Thanh toán thẻ tín dụng Sacombank: Giảm 30K cho đơn từ 100K vào thứ hai mỗi tuần</div>
                            </div>
                        </div>
                        <button class="code-copy">
                            <span>Copy Code</span>
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                    <div class="menu-restaurant-list">
                        <div class="search-item">
                            <p class="input-group">
                                <i class="fa fa-search" aria-hidden="true"></i>
                                <input type="text" placeholder="tìm món">
                            </p>
                        </div>
                    </div>
                    <div aria-label="grid" aria-readonly="true" role="grid" tabindex="0" style="box-sizing: border-box; direction: ltr; height: auto; position: relative; width: 558px; will-change: transform; overflow: auto; outline: none;">
                        <div class="ReactVirtualized__Grid__innerScrollContainer myheight" role="rowgroup" style="width: auto; height: 4509px; max-width: 558px; max-height: 4509px; overflow: hidden; position: relative;">
                            <div class="menu-group" id="section-group-menu-2648835" style="height: 56px; left: 0px; position: absolute; top: 0px; width: 100%;">
                                <div class="title-menu">BÁNH TRÁNG TRỘN KHÔNG CAY</div>
                            </div>
                            <div id="Food_PartialView">
                                @*-----------------------------------*@
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="cart">
    <div class="header-cart">
        <div class="text">
            <span>1 phần - 1 người</span>
        </div>
        <div class="options-cart">
            <div class="option-item">
                <button class="btn">Nhóm cùng đặt</button>
            </div>
            <div class="reset">
                <button class="btn btn-reset">Reset</button>
            </div>
        </div>
    </div>
    @if (Model != null)
    {
        int i = 0;
        <div class="cart-info">
            <div class="img-user">
                <img src=@ViewBag.ImgaeUser>
                <div class="name-user">
                    @ViewBag.NameUser
                </div>
                <div class="count-number">
                    @i Món
                </div>
            </div>
        </div>

        <div class="list-food">


            @foreach (var item in Model)
            {
                i++;
                <div class="list-food-item">
                    <button class="minusbtn" id="minus">-</button>
                    <span class="number-products" id="numberPlace">1</span>
                    <button class="plusbtn" id="plus">+</button>
                    <div class="name-of-products">
                        <span class="name" style="overflow-x:hidden;">@item.NameofFood</span>
                        <span id="item-price" class="prices">@item.Price</span>
                    </div>
                </div>
            }

        </div>
    }
    @if (Model != null)
    {
        double total = 0;
        double fees = 10000;
        double ttInvoices = 0;

        <div class="total">
            <div class="total-price">
                <span class="text">
                    Cộng
                </span>


                @foreach (var item2 in Model)
                {
                    total += @item2.Price;
                }

                <input type="text" value="@total" style="border:none; border-bottom:solid 1px black; text-align: center; margin-left: 70px; margin: 5px;" />

            </div>
            <div class="total-price">
                <span class="text">
                    Phí vận chuyển (Est.)
                </span>
                <span class="prices">
                    10,000đ/km
                </span>
            </div>
        </div>
        <div class="prepare-to-order">
            <div class="temporary-prices">
                <span class="text">Tạm tính</span>
                <span class="prices">
                    @{
                        ttInvoices = total + fees;
                    }
                    @ttInvoices
                </span>
            </div>
            <div class="btn-Order">
                <button type="button" class="btn" data-toggle="modal" data-target="#exampleModal">Đặt Trước</button>
            </div>
        </div>
    }
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document" style="max-width: 1150px;">
        @if (Model != null)
        {
            double total = 0;
            double fees = 10000;
            double ttInvoices = 0;
            int i = 0;
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Xác nhận đơn hàng</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">X</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="content">
                        <div class="content-left" style="float:left;">
                            <div class="google-maps" style="width: 350px; height: 350px;">
                                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1959.6977493463517!2d106.70496832472143!3d10.780990321459603!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31752f492b78ffff%3A0xdf1209cdf8c48b63!2sShopeefood!5e0!3m2!1svi!2s!4v1667898560169!5m2!1svi!2s" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                            </div>
                            <div class="address">
                                <div class="gps">
                                    <div class="circle"></div>
                                    <div class="name">@ViewBag.NameUser</div>
                                    <div class="address-user">TP.HCM</div>
                                </div>
                            </div>
                            <div class="change-address">
                                <div class="text" style="font-size: 19px; font-weight: 700;">
                                    Thay đổi thông tin đơn hàng
                                </div>
                                <div class="pointer">&#8594;</div>
                            </div>
                        </div>
                        <div class="content-right">
                            <div class="details-invoices">
                                <span class="text" style="font-size: 19px; margin-left: -20px; font-weight: 700;">Chi tiết đơn hàng</span>
                                <span class="pointer">></span>
                            </div>

                            @foreach (var item in Model)
                            {
                                i++;
                                <div class="item-producs">
                                    <div class="number-products">
                                        @i
                                    </div>
                                    <div class="name-products">
                                        @item.NameofFood
                                    </div>
                                    <div class="price-product">
                                        @item.Price đ
                                    </div>
                                </div>
                                total += @item.Price;
                            }

                            <div class="plus-prices">
                                <div class="total-prices">
                                    <span class="text" style="font-size: 19px; margin-left: -20px; font-weight: 700;">
                                        Tổng <span class="numbers">@i</span> món
                                    </span>
                                    <span class="prices">@total đ</span>
                                </div>

                                <div class="fees">
                                    <span class="text" style="margin-left: -20px;">
                                        Phí vận chuyển:
                                    </span>
                                    <span class="prices">10,000 đ</span>
                                </div>
                            </div>

                            <div class="curent-prices">
                                <div class="text" style="font-size: 19px; margin-left: -20px; font-weight: 700;">
                                    Tạm tính
                                </div>
                                <div class="prices">
                                    @{
                                        ttInvoices = total + fees;
                                    }
                                    @ttInvoices đ
                                </div>
                            </div>

                            <div class="payment-method">
                                <div class="text" style="font-size: 19px; margin-left: -20px; font-weight: 700;">
                                    Thanh toán bằng tiền mặt
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="justify-content: center;">
                    <div class="complete-payment" style="width: 100%;">
                        <div class="button-payment">
                            <button class="btn" >
                                Hoàn tất đơn hàng &nbsp;
                                <i class="fas fa-angle-right"></i> &nbsp;
                                <span class="final-money">
                                    @ttInvoices đ
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
@*<script src="~/js/site.js" asp-append-version="true"></script>*@

<script>
    $('#Detail_Restaurant').load('/Restaurant/GetRestaurantByID')
    $('#Food_PartialView').load('/Food/TypesofFoods_Partial')
</script>

<script>
    var totalPrice = 0;

    for (var i = 0; i < document.getElementById("item-price").length; i++) {
        totalPrice = totalPrice + document.getElementsByClassName("Price").value;
    }

    document.getElementById("sum-prices").innerHTML = totalPrice;

</script>

<script>
    $('#closeModal').on('click', () => {
        $('#modal-invoice').modal('hide');
    });
</script>


<script>
    const element = document.getElementsByClassName('item-restaurant-row').lastChild;
    const heightMax = element.style.height;

    var heightInList = document.getElementsByClassName('myheight');

    heightInList(function (heightMax) {
        $(this).css({ height: (heightMax) + 'px' });
    });
</script>